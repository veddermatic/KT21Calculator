(this["webpackJsonpbasic-ts"]=this["webpackJsonpbasic-ts"]||[]).push([[0],{51:function(e,t){},53:function(e,t,r){"use strict";r.r(t);var n,i=r(1),s=r.n(i),a=r(34),c=r.n(a),l=r(4),o=r(13),h=r(7),d=r(6),u=r(33),j=r(8),b=r(16),v=r(9),f=r.n(v);!function(e){e.None="X",e.Balanced="Balanced",e.Ceaseless="Ceaseless",e.Relentless="Relentless",e.Rending="Rending",e.CritPromotesOneFailToNormal="Starfire"}(n||(n={}));var x=[n.Balanced,n.Ceaseless,n.Relentless],m=n,g=function(){function e(t,r,n){Object(j.a)(this,e),this.crit=void 0,this.norm=void 0,this.fail=void 0,this.crit=t,this.norm=r,this.fail=n}return Object(b.a)(e,[{key:"toCritNormFail",value:function(){return[this.crit,this.norm,this.fail]}}]),e}(),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:m.None,o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]&&arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10],u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:12,b=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]&&arguments[13],f=arguments.length>14&&void 0!==arguments[14]&&arguments[14],x=arguments.length>15&&void 0!==arguments[15]&&arguments[15];Object(j.a)(this,e),this.attacks=void 0,this.bs=void 0,this.normDmg=void 0,this.critDmg=void 0,this.mwx=void 0,this.apx=void 0,this.px=void 0,this.reroll=void 0,this.lethalx=void 0,this.rending=void 0,this.starfire=void 0,this.wounds=void 0,this.fnp=void 0,this.brutal=void 0,this.stun=void 0,this.stormShield=void 0,this.attacks=t,this.bs=r,this.normDmg=n,this.critDmg=i,this.mwx=s,this.apx=a,this.px=c,this.reroll=l,this.lethalx=o,this.rending=h,this.starfire=d,this.wounds=u,this.fnp=b,this.brutal=v,this.stun=f,this.stormShield=x}return Object(b.a)(e,[{key:"critSkill",value:function(){return 0===this.lethalx?6:this.lethalx}},{key:"possibleDmg",value:function(e,t){return e*(this.critDmg+this.mwx)+t*this.normDmg}},{key:"cancelsPerParry",value:function(){return this.stormShield?2:1}},{key:"toDieProbs",value:function(){var e=(this.bs-1)/6,t=this.critSkill(),r=(7-t)/6,n=(t-this.bs)/6;if(this.reroll===m.Ceaseless||this.reroll===m.Relentless){var i=this.reroll===m.Ceaseless?7/6:(this.bs+5)/6;e=1-(r*=i)-(n*=i)}return new g(r,n,e)}},{key:"setProp",value:function(e,t){return this[e]=t,this}},{key:"withProp",value:function(e,t){var r=f.a.clone(this);return r.setProp(e,t),r}},{key:"withAlwaysNormHit",value:function(){return this.withProp("bs",1).setProp("lethalx",7)}},{key:"withAlwaysCritHit",value:function(){return this.withProp("bs",1).setProp("lethalx",1)}}],[{key:"justDamage",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new e(0,0,t,r,n)}}]),e}(),p=function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,null,[{key:"PipsUp",value:function(){return f.a.range(e.PipMin,e.PipMax+1)}},{key:"PipsDown",value:function(){return f.a.rangeRight(e.PipMin,e.PipMax+1)}},{key:"Valid",value:function(t){return t>=e.PipMin&&t<=e.PipMax}}]),e}();p.PipMin=1,p.PipMax=6;var y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(j.a)(this,e),this.defense=void 0,this.save=void 0,this.wounds=void 0,this.fnp=void 0,this.invulnSave=void 0,this.coverSaves=void 0,this.chitin=void 0,this.defense=t,this.save=r,this.wounds=n,this.fnp=i,this.invulnSave=s,this.coverSaves=a,this.chitin=c}return Object(b.a)(e,[{key:"usesFnp",value:function(){return p.Valid(this.fnp)}},{key:"usesInvulnSave",value:function(){return p.Valid(this.invulnSave)}},{key:"relevantSave",value:function(){return this.usesInvulnSave()?this.invulnSave:this.save}},{key:"toDieProbs",value:function(){var e=(6-this.relevantSave())/6,t=(this.relevantSave()-1)/6;return new g(1/6,e,t)}},{key:"setProp",value:function(e,t){return this[e]=t,this}},{key:"withProp",value:function(e,t){var r=f.a.clone(this);return r.setProp(e,t),r}},{key:"withAlwaysNonfail",value:function(){return this.withProp("save",1)}}]),e}(),w=r(3),S=r(35),k=r(0),D=function e(t,r,n,i){Object(j.a)(this,e),this.id=void 0,this.selectedValue=void 0,this.values=void 0,this.valueChangeHandler=void 0,this.id=t,this.values=n.map((function(e){return e.toString()})),this.selectedValue=r.toString(),this.valueChangeHandler=i},P=function(e){var t,r=e.selectedValue.toString(),n=e.values.map((function(e){return Object(k.jsx)("option",{value:e,children:e},e)}));function i(t){var i=Math.max(0,e.values.indexOf(r))+t;i>=0&&i<n.length&&e.valueChangeHandler(e.values[i])}return Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{htmlFor:e.id,style:{fontSize:"11px",display:"inline",verticalAlign:"middle"},children:null!==(t=e.label)&&void 0!==t?t:e.id}),Object(k.jsxs)(S.a,{className:"mb-1",children:[Object(k.jsx)(u.a,{variant:"danger",onClick:function(){return i(-1)},children:"-"}),Object(k.jsx)("select",{name:e.id,id:e.id,value:r,onChange:function(t){e.valueChangeHandler(t.target.value)},style:{maxWidth:"70px"},children:n}),Object(k.jsx)(u.a,{variant:"danger",onClick:function(){return i(1)},children:"+"})]})]})},N=r(5),M=r(55),F="X",C="\u2714",W=[F,C],A="d-flex justify-content-center";function B(e){var t=parseInt(e);return isNaN(t)?0:t}function E(e){return e?C:F}function R(e,t,r){return f.a.range(e,t+1).map((function(e){return e.toString()+(r||"")}))}function T(e,t,r){return f.a.concat([F],R(e,t,r))}var H=R(2,6,"+"),I=z(H);function z(e){return f.a.concat([F],e)}function V(e,t,r){return function(n){return function(i){var s=f.a.clone(e);s[n]=void 0===r?i:r(i),t(s)}}}function q(e,t){return[V(e,t),L(e,t),X(e,t)]}function L(e,t){return V(e,t,B)}function X(e,t){return V(e,t,(function(e){return e===C}))}function G(e,t,r){return Object(M.a)(e,t)*Math.pow(r,t)*Math.pow(1-r,e-t)}function J(e,t,r){var n,i=null!==(n=e.get(t))&&void 0!==n?n:0;e.set(t,i+r)}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(100*e).toFixed(t)}var U=function(e){var t=e.attacker,r=q(t,e.changeHandler),n=Object(l.a)(r,3),i=n[0],s=n[1],a=n[2],c=[new D("Attacks",t.attacks,R(1,8),s("attacks")),new D("BS",t.bs+"+",H,s("bs")),new D("Normal Dmg",t.normDmg,R(1,9),s("normDmg")),new D("Crit Dmg",t.critDmg,R(1,9),s("critDmg")),new D("MWx",t.mwx,T(1,4),s("mwx")),new D("APx",t.apx,T(1,3),s("apx")),new D("Px",t.px,T(1,3),s("px")),new D("Reroll",t.reroll,z(x),i("reroll")),new D("LethalX",t.lethalx+"+",T(4,5,"+"),s("lethalx")),new D("Rending",E(t.rending),W,a("rending")),new D("Starfire",E(t.starfire),W,a("starfire"))].map((function(e){return Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:"pr-0",children:Object(k.jsx)(P,Object(w.a)({},e))})},e.id)}));return Object(k.jsxs)(o.a,{style:{width:"310px"},children:[Object(k.jsx)(h.a,{children:"Attacker"}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{className:"p-0",children:c.slice(0,c.length/2)})}),Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{className:"p-0",children:c.slice(c.length/2)})})]})]})},Q=function(e){var t=e.defender,r=q(t,e.changeHandler),n=Object(l.a)(r,3),i=n[1],s=n[2],a=[new D("Defense",t.defense,R(0,4),i("defense")),new D("Save",t.save+"+",H,i("save")),new D("Wounds",t.wounds,R(1,19),i("wounds")),new D("CoverSaves",t.coverSaves,T(1,2),i("coverSaves")),new D("InvulnSave",t.invulnSave+"+",I,i("invulnSave")),new D("FeelNoPain",t.fnp+"+",T(3,6,"+"),i("fnp")),new D("ExtendedChitin",E(t.chitin),W,s("chitin"))].map((function(e){return Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:"pr-0",children:Object(k.jsx)(P,Object(w.a)({},e))})},e.id)}));return Object(k.jsxs)(o.a,{style:{width:"150px"},children:[Object(k.jsx)(h.a,{children:"Defender"}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{className:"p-0",children:a})})})]})},Y=function(e){var t,r=[new D("Rounds",e.rounds,R(1,9),(t=e.roundsChangeHandler,function(e){t(B(e))}))].map((function(e){return Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:"pr-0",children:Object(k.jsx)(P,Object(w.a)({},e))})},e.id)}));return Object(k.jsxs)(o.a,{style:{width:"320px"},children:[Object(k.jsx)(h.a,{children:"General"}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{className:"p-0",children:r})})})]})},Z=r(14),$=r(29),_=function(e){var t=0,r=0,n=0,i=[],s=new Map(Object(Z.a)(e.damageToProb.entries()).sort((function(e,t){return e[0]-t[0]}))),a=0,c=function(e){return(100*e).toFixed(2)};return s.forEach((function(s,l){t+=l*s,r+=Math.min(l,e.defender.wounds)*s,l>=e.defender.wounds&&(n+=s);var o=1-a,h=a+=s;i.push(Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:l}),Object(k.jsx)("td",{children:c(o)}),Object(k.jsx)("td",{children:c(h)}),Object(k.jsx)("td",{children:c(s)})]},l))})),Object(k.jsxs)(o.a,{style:{width:"320px"},children:[Object(k.jsx)(h.a,{children:"Results"}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{style:{fontSize:"11px"},children:"AvgDmgUnbounded:"}),Object(k.jsx)(d.a,{children:t.toFixed(2)})]}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{style:{fontSize:"11px"},children:"AvgDmgBounded:"}),Object(k.jsx)(d.a,{children:r.toFixed(2)})]}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{style:{fontSize:"11px"},children:"KillChance:"}),Object(k.jsxs)(d.a,{children:[(100*n).toFixed(2),"%"]})]}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{children:Object(k.jsxs)($.a,{bordered:!0,striped:!0,style:{fontSize:"11px"},children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Dmg"}),Object(k.jsxs)("th",{children:["p(>=Dmg)",Object(k.jsx)("br",{}),"(%)"]}),Object(k.jsxs)("th",{children:["p(<=Dmg)",Object(k.jsx)("br",{}),"(%)"]}),Object(k.jsxs)("th",{children:["p(Dmg)",Object(k.jsx)("br",{}),"(%)"]})]})}),Object(k.jsx)("tbody",{children:i})]})})})]})},ee=function(e){return Object(k.jsxs)("p",{children:[Object(k.jsx)("a",{href:"https://github.com/jmegner/KT21Calculator",children:"GitHub source code repository"})," ",Object(k.jsx)("br",{}),"Authored by ",Object(k.jsx)("a",{href:"https://github.com/jmegner",children:"Jacob Egner"}),".",Object(k.jsx)("br",{}),"Inspired by ",Object(k.jsx)("a",{href:"https://github.com/ramainen",children:"Damir Fakhrutdinov"}),"'s Monte-Carlo-based ",Object(k.jsx)("a",{href:"http://kt2.doit-cms.ru/",children:"Kill Team Simulator 2"}),".",Object(k.jsx)("br",{})]})},te=function(){function e(t,r,n){Object(j.a)(this,e),this.prob=void 0,this.crits=void 0,this.norms=void 0,this.prob=t,this.crits=r,this.norms=n}return Object(b.a)(e,[{key:"successes",value:function(){return this.crits+this.norms}}]),e}();function re(e){return ne(e.toDieProbs(),e.attacks,e.reroll===m.Balanced,e.rending,e.starfire)}function ne(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=[],a=0;a<=t;a++)for(var c=0;c<=t-a;c++){var l=t-a-c,o=ie(e,a,c,l,r,n,i);o.prob>0&&s.push(o)}return s}function ie(e,t,r,n,i){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=se(t,e.crit,r,e.norm,n,e.fail);return i&&(n>0&&(c*=e.fail),t>0&&(c+=e.crit*se(t-1,e.crit,r,e.norm,n+1,e.fail)),r>0&&(c+=e.norm*se(t,e.crit,r-1,e.norm,n+1,e.fail))),s&&t>0&&r>0&&(t++,r--),a&&t>0&&n>0&&(r++,n--),new te(c,t,r)}function se(e,t,r,n,i,s){return Math.pow(t,e)*Math.pow(n,r)*Math.pow(s,i)*Object(M.b)(e+r+i)/Object(M.b)(e)/Object(M.b)(r)/Object(M.b)(i)}var ae=function e(t,r,n,i,s){Object(j.a)(this,e),this.finalDiceProbs=void 0,this.finalDiceProbsWithPx=void 0,this.pxIsRelevant=void 0,this.coverSaves=void 0,this.coverSavesWithPx=void 0,this.finalDiceProbs=t,this.finalDiceProbsWithPx=r,this.pxIsRelevant=n,this.coverSaves=i,this.coverSavesWithPx=s};function ce(e,t){var r=e.toDieProbs(),n=Math.max(0,e.usesInvulnSave()?e.defense:e.defense-t.apx),i=Math.min(e.coverSaves,n),s=ne(r,n-i,e.chitin),a=[],c=t.apx>=t.px?0:t.px,l=c>0&&!e.usesInvulnSave(),o=0;if(l){var h=Math.max(0,e.defense-c);a=ne(r,h-(o=Math.min(e.coverSaves,h)),e.chitin)}return new ae(s,a,l,i,o)}function le(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new Map,i=(e-1)/6;return t.forEach((function(e,t){for(var s=r?1:0;s<=t;s++){var a=G(t,s,i);J(n,s,e*a)}})),n}function oe(e,t){var r,n=new Map(e),i=Object(N.a)(f.a.range(1,t));try{for(i.s();!(r=i.n()).done;){r.value;var s=n;n=new Map;var a,c=Object(N.a)(s);try{for(c.s();!(a=c.n()).done;){var o,h=Object(l.a)(a.value,2),d=h[0],u=h[1],j=Object(N.a)(e);try{for(j.s();!(o=j.n()).done;){var b=Object(l.a)(o.value,2);J(n,d+b[0],u*b[1])}}catch(v){j.e(v)}finally{j.f()}}}catch(v){c.e(v)}finally{c.f()}}}catch(v){i.e(v)}finally{i.f()}return n}function he(e,t,r,n,i){var s=t*e.mwx;function a(){var e=Math.min(n,t);n-=e,t-=e}function c(){var e=Math.min(n,r);n-=e,r-=e}function l(){var e=Math.min(i,r);i-=e,r-=e}function o(){var e=Math.min(i/2>>0,t);i-=2*e,t-=e}return e.critDmg>=e.normDmg?(a(),c(),e.critDmg>2*e.normDmg?(o(),l()):(i>r&&i>=2&&t>0&&(i-=2,t--),l(),o())):(l(),c(),a(),o()),s+=t*e.critDmg+r*e.normDmg}var de,ue=function(){var e=s.a.useState(new O),t=Object(l.a)(e,2),r=t[0],n=t[1],i=s.a.useState(new y),a=Object(l.a)(i,2),c=a[0],u=a[1],j=s.a.useState(1),b=Object(l.a)(j,2),v=b[0],f=b[1],x=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=re(e),i=ce(t,e),s=new Map;function a(t,r,n){var i=t.prob*r.prob,a=he(e,t.crits,t.norms,r.crits,r.norms+n);a>0&&J(s,a,i)}var c,l=Object(N.a)(n);try{for(l.s();!(c=l.n()).done;){var o=c.value;if(o.crits+o.norms>0)if(i.pxIsRelevant&&o.crits>0){var h,d=Object(N.a)(i.finalDiceProbsWithPx);try{for(d.s();!(h=d.n()).done;){a(o,h.value,i.coverSavesWithPx)}}catch(v){d.e(v)}finally{d.f()}}else{var u,j=Object(N.a)(i.finalDiceProbs);try{for(j.s();!(u=j.n()).done;){a(o,u.value,i.coverSaves)}}catch(v){j.e(v)}finally{j.f()}}}}catch(v){l.e(v)}finally{l.f()}t.usesFnp()&&(s=le(t.fnp,s));var b=0;return s.forEach((function(e){return b+=e})),b<1&&s.set(0,1-b),r>1&&(s=oe(s,r)),s}(r,c,v);return Object(k.jsxs)(o.a,{style:{width:"510px"},children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{className:A+" p-0",xs:"auto",children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(h.a,{className:"border",children:Object(k.jsx)(U,{attacker:r,changeHandler:n})}),Object(k.jsx)(h.a,{className:"border",children:Object(k.jsx)(Y,{rounds:v,roundsChangeHandler:f})})]})}),Object(k.jsx)(d.a,{className:A+" border",xs:"auto",children:Object(k.jsx)(Q,{defender:c,changeHandler:u})})]}),Object(k.jsx)(h.a,{className:"border",children:Object(k.jsx)(_,{damageToProb:x,defender:c})}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:A+" border",style:{fontSize:"11px"},children:Object(k.jsx)(ee,{})})}),Object(k.jsx)(h.a,{children:Object(k.jsxs)(d.a,{className:"border",style:{fontSize:"11px"},children:["Notes:",Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:"AvgDamageBounded is the average of damage bounded by the number of the defender's wounds."}),Object(k.jsx)("li",{children:"AvgDamageUnbounded is the average of damage without regard to defender's wounds."}),Object(k.jsx)("li",{children:"InvulnSave is always used if valid."}),Object(k.jsxs)("li",{children:["Feel No Pain (FNP) refers to the category of abilities where just before damage is actually resolved, you roll a die for each potential wound, and each rolled success prevents a wound from being lost. Even MWx damage can be prevented via FNP. The \u202f",Object(k.jsx)("a",{href:"https://wahapedia.ru/kill-team2/kill-teams/death-guard#Plague-Marine-Warrior-",children:"Plague Marine (Warrior)"}),"\u202f ability Disgustingly Resilient is a FNP=5+ ability."]}),Object(k.jsxs)("li",{children:['"Starfire" refers to \u202f',Object(k.jsx)("a",{href:"https://wahapedia.ru/kill-team2/kill-teams/tomb-world/#Equipment",children:"Necron Equipment"}),"\u202f Starfire Core, which allows you to transform a failed hit into a normal hit if you had at least one critical hit."]}),Object(k.jsxs)("li",{children:["Balanced and Chitin (",Object(k.jsx)("a",{href:"https://wahapedia.ru/kill-team2/kill-teams/hive-fleet/#Equipment",children:"Hive Fleet equipment"})," Extended Chitin) will only reroll a fail even if would be wise to reroll a normal success."]}),Object(k.jsxs)("li",{children:["Cover saves can go up to 2 via the \u202f",Object(k.jsx)("a",{href:"https://wahapedia.ru/kill-team2/kill-teams/hive-fleet#Strategic-Ploys",children:"Hive Fleet strategic ploy"}),"\u202f Lurk and the \u202f",Object(k.jsx)("a",{href:"https://wahapedia.ru/kill-team2/kill-teams/brood-coven#Strategic-Ploys",children:"Brood Coven strategic ploy"}),"\u202f Lurk In The Shadows. Lurk In The Shadows also allows a defender's 1 cover save to count as a critical save, but that is not implemented."]})]})]})})]})},je=function(e){var t=e.attacker,r=q(t,e.changeHandler),n=Object(l.a)(r,3),i=n[0],s=n[1],a=n[2],c=[new D("Attacks",t.attacks,R(1,8),s("attacks")),new D("WS",t.bs+"+",H,s("bs")),new D("Normal Dmg",t.normDmg,R(1,9),s("normDmg")),new D("Critical Dmg",t.critDmg,R(1,9),s("critDmg")),new D("LethalX",t.lethalx+"+",T(4,5,"+"),s("lethalx")),new D("Reroll",t.reroll,z(x),i("reroll")),new D("Wounds",t.wounds,R(1,19),s("wounds")),new D("Rending",E(t.rending),W,a("rending")),new D("Brutal",E(t.brutal),W,a("brutal")),new D("Stun",E(t.stun),W,a("stun")),new D("Storm Shield",E(t.stormShield),W,a("stormShield"))].map((function(e){return Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:"pr-0",children:Object(k.jsx)(P,Object(w.a)({},e))})},e.id)})),u=(c.length+1)/2,j=c.slice(0,u),b=c.slice(u);return Object(k.jsxs)(o.a,{style:{width:"310px"},children:[Object(k.jsx)(h.a,{children:e.title}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{className:"p-0",children:j})}),Object(k.jsx)(d.a,{children:Object(k.jsx)(o.a,{className:"p-0",children:b})})]})]})};!function(e){e.MaxDmgToEnemy="Max Dmg To Enemy",e.MinDmgToSelf="Min Dmg To Self",e.Strike="Strike",e.Parry="Parry"}(de||(de={}));var be,ve=de,fe=function(e){var t=Object.values(ve),r=e.fightOptions,n=q(r,e.changeHandler),i=Object(l.a)(n,2),s=i[0],a=i[1],c=[new D("Fighter A Strategy",r.strategyFighterA,t,s("strategyFighterA")),new D("Fighter B Strategy",r.strategyFighterB,t,s("strategyFighterB")),new D("Attacker/FirstActer",r.firstFighter,["A","B"],s("firstFighter")),new D("Rounds",r.numRounds,R(1,3),a("numRounds"))].map((function(e){return Object(k.jsx)(d.a,{className:"pr-0 col-auto",children:Object(k.jsx)(P,Object(w.a)({},e))},e.id)}));return Object(k.jsxs)(o.a,{style:{width:"600px"},children:[Object(k.jsx)(h.a,{children:"General"}),Object(k.jsx)(h.a,{children:c})]})};!function(e){e[e.CritStrike=0]="CritStrike",e[e.NormStrike=1]="NormStrike",e[e.CritParry=2]="CritParry",e[e.NormParry=3]="NormParry"}(be||(be={}));var xe=be,me=function(){function e(t,r,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Object(j.a)(this,e),this.profile=void 0,this.crits=void 0,this.norms=void 0,this.strategy=void 0,this.currentWounds=void 0,this.hasDoneStun=void 0,this.profile=t,this.crits=r,this.norms=n,this.strategy=i,this.currentWounds=s>0?s:this.profile.wounds,this.hasDoneStun=a}return Object(b.a)(e,[{key:"applyDmg",value:function(e){this.currentWounds=Math.max(0,this.currentWounds-e)}},{key:"totalDmg",value:function(){return this.profile.possibleDmg(this.crits,this.norms)}},{key:"nextDmg",value:function(){return this.crits>0?this.profile.critDmg:this.norms>0?this.profile.normDmg:0}},{key:"nextStrike",value:function(){return this.crits>0?xe.CritStrike:xe.NormStrike}},{key:"withStrategy",value:function(e){var t=f.a.clone(this);return t.strategy=e,t}}]),e}(),ge=function(e,t){return[e,t].toString()},Oe=function(e){return e.split(",").map((function(e){return parseInt(e)}))};function pe(e){var t,r=new Map,n=new Map,i=Object(N.a)(e);try{for(i.s();!(t=i.n()).done;){var s=Object(l.a)(t.value,2),a=s[0],c=s[1],o=Oe(a),h=Object(l.a)(o,2),d=h[0],u=h[1];J(r,d,c),J(n,u,c)}}catch(j){i.e(j)}finally{i.f()}return[r,n]}function ye(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.MaxDmgToEnemy,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ve.MaxDmgToEnemy,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=re(e),c=re(t),o=new Map,h=Object(N.a)(a);try{for(h.s();!(r=h.n()).done;){var d,u=r.value,j=Object(N.a)(c);try{for(j.s();!(d=j.n()).done;){var b=d.value,v=new me(e,u.crits,u.norms,n),f=new me(t,b.crits,b.norms,i);we(v,f);var x=u.prob*b.prob;J(o,ge(v.currentWounds,f.currentWounds),x)}}catch(E){j.e(E)}finally{j.f()}}}catch(E){h.e(E)}finally{h.f()}if(s>1){var m,g=new Map,O=Object(N.a)(o);try{for(O.s();!(m=O.n()).done;){var p=Object(l.a)(m.value,2),y=p[0],w=p[1],S=Oe(y),k=Object(l.a)(S,2),D=k[0],P=k[1];if(0===D||0===P)J(g,y,w);else{var M,F=ye(e.withProp("wounds",D),t.withProp("wounds",P),n,i,s-1),C=Object(N.a)(F);try{for(C.s();!(M=C.n()).done;){var W=Object(l.a)(M.value,2),A=W[0],B=W[1];J(g,A,w*B)}}catch(E){C.e(E)}finally{C.f()}}}}catch(E){O.e(E)}finally{O.f()}o=g}return o}function we(e,t){for(var r=e,n=t;r.crits+r.norms+n.crits+n.norms>0&&r.currentWounds>0&&n.currentWounds>0;){if(r.crits+r.norms<=0){r.applyDmg(n.totalDmg());break}if(n.crits+n.norms<=0){n.applyDmg(r.totalDmg());break}ke(Se(r,n),r,n);var i=[n,r];r=i[0],n=i[1]}if(e.crits<0||e.norms<0||t.crits<0||e.norms<0)throw new Error("bug: ended up with negative successes")}function Se(e,t){if(e.nextDmg()>=t.currentWounds||t.profile.brutal)return e.nextStrike();if(e.profile.stun&&!e.hasDoneStun&&e.crits>0&&0===t.crits)return xe.CritStrike;var r=De(e,t);if(null!==r)return r;if(e.strategy===ve.Strike)return e.nextStrike();if(e.strategy===ve.Parry)return Pe(e,t);if(e.strategy===ve.MaxDmgToEnemy||e.strategy===ve.MinDmgToSelf){var n=t.withStrategy(ve.Strike),i=f.a.clone(n),s=f.a.clone(e),a=f.a.clone(e),c=e.nextStrike(),l=Pe(e,t);ke(c,s,n),ke(l,a,i),we(n,s),we(i,a);return(e.strategy===ve.MaxDmgToEnemy?n.currentWounds<=i.currentWounds:s.currentWounds>=a.currentWounds)?c:l}throw new Error("unsupported FightStrategy: "+e.strategy)}function ke(e,t,r){if(e===xe.CritStrike)t.crits--,r.applyDmg(t.profile.critDmg),t.profile.stun&&!t.hasDoneStun&&(t.hasDoneStun=!0,r.norms=Math.max(0,r.norms-1));else if(e===xe.NormStrike)t.norms--,r.applyDmg(t.profile.normDmg);else if(e===xe.CritParry){t.crits--;for(var n=0;n<t.profile.cancelsPerParry();n++)r.crits>0?r.crits--:r.norms>0&&r.norms--}else{if(e!==xe.NormParry)throw new Error("invalid DieChoice");t.norms--,r.norms=Math.max(0,r.norms-t.profile.cancelsPerParry())}}function De(e,t){if(t.crits+t.norms<=e.profile.cancelsPerParry()){var r=null;if(t.crits>0?e.crits>0&&(r=xe.CritParry):r=e.norms>0?xe.NormParry:xe.CritParry,null!==r){var n=e.crits-(r===xe.CritParry?1:0),i=e.norms-(r===xe.NormParry?1:0);if(e.profile.possibleDmg(n,i)>=t.profile.wounds)return r}}return null}function Pe(e,t){return t.crits>0&&e.crits>0?xe.CritParry:e.norms>0&&t.norms>0?xe.NormParry:e.crits>0?xe.CritParry:xe.NormStrike}function Ne(e,t,r){var n,i=function(e){var t=0;return e.forEach((function(e,r){t+=r*e})),t}(t),s=r-i,a=null!==(n=t.get(0))&&void 0!==n?n:0,c=[],l=new Map(Object(Z.a)(t.entries()).sort((function(e,t){return e[0]-t[0]}))),u=0;return l.forEach((function(e,t){var r=1-u,n=u+=e;c.push(Object(k.jsxs)("tr",{children:[Object(k.jsx)("td",{children:t}),Object(k.jsx)("td",{children:K(r)}),Object(k.jsx)("td",{children:K(n)}),Object(k.jsx)("td",{children:K(e)})]},t))})),Object(k.jsxs)(o.a,{children:[Object(k.jsx)(h.a,{children:e}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{style:{fontSize:"11px"},children:"DeathChance:"}),Object(k.jsxs)(d.a,{children:[K(a),"%"]})]}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{style:{fontSize:"11px"},children:"AvgRemainingWounds:"}),Object(k.jsx)(d.a,{children:i.toFixed(2)})]}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{style:{fontSize:"11px"},children:"AvgDmgTaken:"}),Object(k.jsx)(d.a,{children:s.toFixed(2)})]}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{children:Object(k.jsxs)($.a,{bordered:!0,striped:!0,style:{fontSize:"11px"},children:[Object(k.jsx)("thead",{children:Object(k.jsxs)("tr",{children:[Object(k.jsx)("th",{children:"Wnds"}),Object(k.jsxs)("th",{children:["p(>=Wnds)",Object(k.jsx)("br",{}),"(%)"]}),Object(k.jsxs)("th",{children:["p(<=Wnds)",Object(k.jsx)("br",{}),"(%)"]}),Object(k.jsxs)("th",{children:["p(Wnds)",Object(k.jsx)("br",{}),"(%)"]})]})}),Object(k.jsx)("tbody",{children:c})]})})})]})}var Me=function(e){return Object(k.jsxs)(o.a,{children:[Object(k.jsx)(h.a,{children:"Results"}),Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{className:"border",children:Ne("FighterA",e.fighterAWoundProbs,e.fighterAWoundsOrig)}),Object(k.jsx)(d.a,{className:"border",children:Ne("FighterB",e.fighterBWoundProbs,e.fighterBWoundsOrig)})]})]})},Fe=function e(){Object(j.a)(this,e),this.strategyFighterA=void 0,this.strategyFighterB=void 0,this.firstFighter=void 0,this.numRounds=void 0,this.strategyFighterA=ve.MaxDmgToEnemy,this.strategyFighterB=ve.MaxDmgToEnemy,this.firstFighter="A",this.numRounds=1},Ce=function(){var e=s.a.useState(new O),t=Object(l.a)(e,2),r=t[0],n=t[1],i=s.a.useState(new O),a=Object(l.a)(i,2),c=a[0],u=a[1],j=s.a.useState(new Fe),b=Object(l.a)(j,2),v=b[0],f=b[1],x="A"===v.firstFighter,m=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve.MaxDmgToEnemy,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ve.MaxDmgToEnemy;return pe(ye(e,t,r,n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:1))}(x?r:c,x?c:r,x?v.strategyFighterA:v.strategyFighterB,x?v.strategyFighterB:v.strategyFighterA,v.numRounds),g=Object(l.a)(m,2),p=g[0],y=g[1],w=x?p:y,S=x?y:p;return Object(k.jsxs)(o.a,{style:{width:"800"},children:[Object(k.jsxs)(h.a,{children:[Object(k.jsx)(d.a,{className:A+" p-0 border",children:Object(k.jsx)(je,{title:"Fighter A",attacker:r,changeHandler:n})}),Object(k.jsx)(d.a,{className:A+" p-0 border",children:Object(k.jsx)(je,{title:"Fighter B",attacker:c,changeHandler:u})})]}),Object(k.jsx)(h.a,{className:"border",children:Object(k.jsx)(d.a,{className:A+" p-0 border",children:Object(k.jsx)(fe,{fightOptions:v,changeHandler:f})})}),Object(k.jsx)(h.a,{className:"border",children:Object(k.jsx)(d.a,{className:A+" p-0 border",children:Object(k.jsx)(Me,{fighterAWoundProbs:w,fighterBWoundProbs:S,fighterAWoundsOrig:r.wounds,fighterBWoundsOrig:c.wounds})})}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:A+" border",style:{fontSize:"11px"},children:Object(k.jsx)(ee,{})})}),Object(k.jsx)(h.a,{children:Object(k.jsx)(d.a,{className:A+" border",children:Object(k.jsxs)("div",{children:["Notes:",Object(k.jsxs)("ul",{children:[Object(k.jsxs)("li",{children:['All strategies will do certain no-downside actions, with the consequence that "Strike" will still sometimes parry and "Parry" will still sometimes strike.',Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:"If fighter can kill enemy in next strike, they will do so."}),Object(k.jsx)("li",{children:"If fighter can parry enemy's last success and still kill enemy afterwards, they will do so."})]})]}),Object(k.jsx)("li",{children:"Balanced will only reroll a fail even if would be wise to reroll a normal success."})]})]})})})]})},We=function(){var e=s.a.useState(!0),t=Object(l.a)(e,2),r=t[0],n=t[1];return Object(k.jsxs)(o.a,{className:"m-0 p-0",children:[Object(k.jsx)(h.a,{className:"mb-1",children:Object(k.jsxs)(d.a,{className:"d-flex justify-content-center align-items-center",children:[r?"Shoot":"Fight","\xa0 \xa0",Object(k.jsxs)(u.a,{onClick:function(){return n(!r)},children:["Switch to ",r?"Fight":"Shoot"]})]})}),Object(k.jsx)(h.a,{children:Object(k.jsxs)(d.a,{children:[Object(k.jsx)("span",{style:{display:r?"initial":"none"},children:Object(k.jsx)(ue,{})}),Object(k.jsx)("span",{style:{display:r?"none":"initial"},children:Object(k.jsx)(Ce,{})})]})})]})};r(52);c.a.render(Object(k.jsx)(We,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.360fdf79.chunk.js.map